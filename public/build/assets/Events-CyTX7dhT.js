import{r as p,K as C,j as e,L as _,S as k}from"./app-B1Wi4E-8.js";import{B as S}from"./badge-pAbO5dy0.js";import{B as h}from"./button-DbPNcHHT.js";import{C as j,a as g,b as A,c as E}from"./card-BPVvoLsA.js";import P from"./Header-CADiE5TA.js";import N from"./Sidebar-Bjmn_f4S.js";import{C as i}from"./circle-check-big-CPqkCcTF.js";import{C as u}from"./circle-alert-CGx_u-pY.js";import{U as f}from"./user-B_mYxzfm.js";import{C as b}from"./calendar-qxz_CE0J.js";import{M as v}from"./map-pin-DSLQyGIy.js";import{A as F}from"./award-Cm6MyIJz.js";import{C as c}from"./clock-C6_irAkP.js";import"./dropdown-menu-jebMUTZ7.js";import"./createLucideIcon-Dto5OKXk.js";import"./Combination-eUq_mQI_.js";import"./index-D0cdTG85.js";import"./index-CtBsO7PD.js";import"./log-out-CYmKAFhs.js";import"./house-BZJAl5Zf.js";import"./users-BDvDcvp5.js";function ee({pendingEvents:n}){const[m,d]=p.useState(!1),[r,t]=p.useState(null),{flash:a}=C().props,x=async(s,y)=>{t(s);try{await k.patch(`/captain/events/${s}/${y}`,{},{preserveState:!0,preserveScroll:!0,onFinish:()=>t(null)})}catch{t(null)}},l=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=s=>{switch(s){case"secretary":return"bg-blue-100 text-blue-800";case"partner_agency":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=s=>{switch(s){case"secretary":return"Secretary";case"partner_agency":return"Partner Agency";default:return s}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Event Approvals"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(N,{currentPage:"captain.events"})}),m&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>d(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(N,{currentPage:"captain.events"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(P,{userName:"Captain",onMobileMenuToggle:()=>d(!m)}),e.jsxs("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:[(a==null?void 0:a.success)&&e.jsx("div",{className:"mb-6 rounded-md bg-green-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(i,{className:"h-5 w-5 text-green-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:a.success})})]})}),(a==null?void 0:a.error)&&e.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"h-5 w-5 text-red-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:a.error})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Approvals"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve community event requests"})]}),n.length===0?e.jsx(j,{className:"shadow-sm",children:e.jsxs(g,{className:"p-8 text-center",children:[e.jsx(i,{className:"mx-auto h-12 w-12 text-green-500"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"All caught up!"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"There are no pending events to review at this time."})]})}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(j,{className:"shadow-sm",children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(E,{className:"text-xl",children:s.title}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:o(s.creator_role)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:l(s.start_date)})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),s.has_certificate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:"Has Certificate"})]})]})]}),e.jsx(S,{className:w(s.creator_role),children:o(s.creator_role)})]})}),e.jsxs(g,{children:[s.image_path&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:`/storage/${s.image_path}`,alt:s.title,className:"h-48 w-full rounded-lg border object-cover"})}),e.jsx("p",{className:"mb-4 text-gray-700",children:s.description}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:l(s.start_date)})]}),s.end_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsxs("span",{children:["Ends: ",l(s.end_date)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:s.creator.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok?s.purok.name:"All Residents"})]})]}),e.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[e.jsx(h,{onClick:()=>x(s.id,"approve"),disabled:r===s.id,className:"bg-green-600 hover:bg-green-700",children:r===s.id?e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"mr-2 h-4 w-4"}),"Approve Event"]})}),e.jsx(h,{variant:"destructive",onClick:()=>x(s.id,"decline"),disabled:r===s.id,children:r===s.id?e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Decline Event"]})})]})]})]},s.id))})]})]})]})]})}export{ee as default};
