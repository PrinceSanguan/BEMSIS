import{K as B,r as a,m as Q,j as e,L as V}from"./app-CMI4-wRO.js";import{B as t}from"./button-CjgRfl2Z.js";import{C as i,b as v,c as w,a as n}from"./card-BMMac1pu.js";import{D as S,b as C,c as k,d as D}from"./dialog-LrRS0fHk.js";import{T as $,a as G,b as _,c as F}from"./tabs-B-GZ2X8N.js";import{T as I}from"./textarea-Cy1XPvJE.js";import K from"./Header-BBtcsF1e.js";import T from"./Sidebar-C62c6G-B.js";import{C as L}from"./calendar-ClpuGV6g.js";import{M as p}from"./qr-code-BjihyYw7.js";import{c as M}from"./createLucideIcon-B7apOioz.js";import{A as J}from"./award-DeCtfeYx.js";import{E as U}from"./eye-CS_BpUM-.js";import{D as W}from"./download-DUbItnpn.js";import"./Combination-C7RuGcr_.js";import"./index-BKGyJec5.js";import"./dropdown-menu-Ceb6RPeA.js";import"./x-CTnFQMCX.js";import"./badge-DRu1kQMu.js";import"./index-CtBsO7PD.js";import"./house-cEkvYD-7.js";import"./user-DvpxExd6.js";import"./log-out-B8rT_nil.js";import"./chart-column-BrD46wav.js";import"./bell-CywUnnhv.js";import"./settings-C-KXUrMN.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Z=M("Send",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],se=M("Star",ee);function Fe({eventsNeedingFeedback:d,feedbackHistory:m}){const{flash:l}=B().props,[g,j]=a.useState(!1),[o,x]=a.useState(null),[E,r]=a.useState(!1),[P,u]=a.useState(!1),[c,Y]=a.useState(null),{data:z,setData:f,post:A,processing:h,errors:N,reset:b}=Q({event_id:0,comments:""}),O=s=>{x(s),f("event_id",s.id),r(!0)},R=s=>{s.preventDefault(),A(route("resident.feedback.submit"),{onSuccess:()=>{r(!1),b(),x(null),l!=null&&l.certificate_data&&(Y(l.certificate_data),u(!0))}})},q=()=>{r(!1),x(null),b()},H=s=>Array.from({length:5},(ae,y)=>e.jsx(se,{className:`h-4 w-4 ${y<s?"fill-current text-yellow-400":"text-gray-300"}`},y));return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Event Feedback"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(T,{currentPage:"resident.feedback"})}),g&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>j(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(T,{currentPage:"resident.feedback"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(K,{onMobileMenuToggle:()=>j(!g)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Event Feedback"}),e.jsx("p",{className:"text-gray-600",children:"Share your thoughts about events you've attended."})]}),e.jsxs($,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(G,{className:"grid w-full grid-cols-2",children:[e.jsxs(_,{value:"pending",children:["Pending Feedback (",d.length,")"]}),e.jsxs(_,{value:"history",children:["Feedback History (",m.length,")"]})]}),e.jsx(F,{value:"pending",className:"space-y-4",children:d.length>0?e.jsx("div",{className:"grid gap-4 md:gap-6",children:d.map(s=>e.jsxs(i,{className:"shadow-sm",children:[e.jsx(v,{className:"pb-3",children:e.jsxs(w,{className:"flex items-center justify-between text-lg",children:[s.event_name,e.jsx("span",{className:"rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-600",children:"Feedback Pending"})]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),new Date(s.date).toLocaleDateString()]}),s.has_certificate&&e.jsx("span",{className:"rounded bg-green-100 px-2 py-1 text-xs text-green-600",children:"Certificate Available"})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs(t,{size:"sm",onClick:()=>O(s),className:"gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"Submit Feedback"]})})]})]},s.id))}):e.jsx(i,{className:"p-8 text-center",children:e.jsxs(n,{children:[e.jsx(p,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No Pending Feedback"}),e.jsx("p",{className:"text-gray-600",children:"You're all caught up! No events are waiting for your feedback."})]})})}),e.jsx(F,{value:"history",className:"space-y-4",children:m.length>0?e.jsx("div",{className:"grid gap-4 md:gap-6",children:m.map(s=>e.jsxs(i,{className:"shadow-sm",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(w,{className:"text-lg",children:s.event_name}),e.jsx("span",{className:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-600",children:"Submitted"})]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-gray-500 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),"Event Date: ",new Date(s.date).toLocaleDateString()]}),e.jsxs("div",{children:["Submitted: ",new Date(s.submitted_date).toLocaleDateString()]})]}),s.rating&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Rating:"}),e.jsx("div",{className:"flex gap-1",children:H(s.rating)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-gray-700",children:"Your Feedback:"}),e.jsx("p",{className:"rounded-md bg-gray-50 p-3 text-sm text-gray-600",children:s.comment})]})]})]},s.id))}):e.jsx(i,{className:"p-8 text-center",children:e.jsxs(n,{children:[e.jsx(p,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No Feedback History"}),e.jsx("p",{className:"text-gray-600",children:"Your submitted feedback will appear here."})]})})})]})]})})]}),e.jsx(S,{open:E,onOpenChange:r,children:e.jsxs(C,{className:"sm:max-w-md",children:[e.jsx(k,{children:e.jsx(D,{children:"Submit Feedback"})}),o&&e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 font-medium text-gray-900",children:o.event_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Event Date: ",new Date(o.date).toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Your Comments ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(I,{placeholder:"Share your thoughts about this event...",value:z.comments,onChange:s=>f("comments",s.target.value),className:"min-h-[100px]",required:!0}),N.comments&&e.jsx("p",{className:"text-sm text-red-500",children:N.comments})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(t,{type:"submit",disabled:h,className:"flex-1 gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),h?"Submitting...":"Submit Feedback"]}),e.jsx(t,{type:"button",variant:"outline",onClick:q,disabled:h,children:"Cancel"})]})]})]})}),e.jsx(S,{open:P,onOpenChange:u,children:e.jsxs(C,{className:"max-w-lg",children:[e.jsx(k,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-yellow-600"}),"Certificate Generated!"]})}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Congratulations! Your certificate has been generated and is ready for download."}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4",children:e.jsx("img",{src:c.qr_url,alt:"Certificate QR Code",className:"h-32 w-32"})}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"Scan this QR code or use the buttons below to access your certificate"}),e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsxs(t,{className:"flex-1 gap-2",onClick:()=>window.open(c.view_url,"_blank"),children:[e.jsx(U,{className:"h-4 w-4"}),"View"]}),e.jsxs(t,{variant:"outline",className:"flex-1 gap-2",onClick:()=>{navigator.clipboard.writeText(c.view_url),alert("Certificate link copied to clipboard!")},children:[e.jsx(W,{className:"h-4 w-4"}),"Copy Link"]})]})]})]})]})})]})]})}export{Fe as default};
