import{r as v,j as e,L as k}from"./app-BFlZVLfL.js";import{B as n}from"./button-Boy8FKKL.js";import{C as l,b as x,c as p,a as t}from"./card-Baaz4UcA.js";import{T as _,a as T,b as h,c as g}from"./tabs-9OPd5Qow.js";import A from"./Header-CMedRCh9.js";import b from"./Sidebar-DpD3E9RJ.js";import{A as d}from"./award-VIx325Ym.js";import{D as w}from"./download-CHWsy8wN.js";import{E as C}from"./eye-DW0qnS2w.js";import{c as E}from"./createLucideIcon-Dlxr-Bzl.js";import"./Combination-D54iwMCs.js";import"./index-BKyhXRh8.js";import"./dropdown-menu-CtBiUUKH.js";import"./badge-B70FZcBD.js";import"./index-CtBsO7PD.js";import"./house-DJ1pNNcn.js";import"./user-B5rPnYOR.js";import"./log-out-DFpwgHaE.js";import"./chart-column-ZjZPA60R.js";import"./calendar-DLubJaV-.js";import"./qr-code-DsoGfgRN.js";import"./bell-CuEBASG7.js";import"./settings-kLrv9lvT.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],D=E("FileCheck",P);function se({certificates:i}){const[j,f]=v.useState(!1),[r,u]=v.useState(null),N=async s=>{if(s.file_path){u(s.id);try{const a=document.createElement("a");a.href=`/storage/${s.file_path}`,a.download=`Certificate_${s.event_name.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(a){console.error("Download error:",a),alert("Failed to download certificate. Please try again.")}finally{u(null)}}else alert("Certificate file not available")},y=s=>{s.file_path?window.open(`/storage/${s.file_path}`,"_blank"):alert("Certificate file not available")},c=s=>{switch(s){case"available":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=i.filter(s=>s.status==="available"),o=i.filter(s=>s.status==="processing");return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"My Certificates"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(b,{currentPage:"resident.certificates"})}),j&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>f(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(b,{currentPage:"resident.certificates"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(A,{onMobileMenuToggle:()=>f(!j)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Certificates"}),e.jsx("p",{className:"text-gray-600",children:"View and download your earned certificates from completed events."})]}),e.jsxs(_,{defaultValue:"available",className:"space-y-6",children:[e.jsxs(T,{className:"grid w-full grid-cols-3",children:[e.jsxs(h,{value:"available",children:["Available (",m.length,")"]}),e.jsxs(h,{value:"processing",children:["Processing (",o.length,")"]}),e.jsxs(h,{value:"all",children:["All Certificates (",i.length,")"]})]}),e.jsx(g,{value:"available",className:"space-y-4",children:m.length>0?e.jsx("div",{className:"grid gap-4 md:gap-6",children:m.map(s=>e.jsxs(l,{className:"shadow-sm",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(p,{className:"flex items-center gap-2 text-lg",children:[e.jsx(d,{className:"h-5 w-5 text-yellow-600"}),s.event_name]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${c(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Date Earned"}),e.jsx("p",{children:new Date(s.date_earned).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Type"}),e.jsx("p",{children:s.type})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{size:"sm",onClick:()=>N(s),disabled:r===s.id,className:"gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),r===s.id?"Downloading...":"Download"]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>y(s),className:"gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Preview"]})]})]})]},s.id))}):e.jsx(l,{className:"p-8 text-center",children:e.jsxs(t,{children:[e.jsx(d,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No Certificates Available"}),e.jsx("p",{className:"text-gray-600",children:"Complete events to earn certificates!"})]})})}),e.jsx(g,{value:"processing",className:"space-y-4",children:o.length>0?e.jsx("div",{className:"grid gap-4 md:gap-6",children:o.map(s=>e.jsxs(l,{className:"shadow-sm",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(p,{className:"flex items-center gap-2 text-lg",children:[e.jsx(D,{className:"h-5 w-5 text-yellow-600"}),s.event_name]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${c(s.status)}`,children:"Processing"})]})}),e.jsxs(t,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Date Earned"}),e.jsx("p",{children:new Date(s.date_earned).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Type"}),e.jsx("p",{children:s.type})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Your certificate is being prepared. You will be notified once it's ready for download."})})]})]},s.id))}):e.jsx(l,{className:"p-8 text-center",children:e.jsxs(t,{children:[e.jsx(D,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No Certificates Processing"}),e.jsx("p",{className:"text-gray-600",children:"All your certificates are ready for download!"})]})})}),e.jsx(g,{value:"all",className:"space-y-4",children:i.length>0?e.jsx("div",{className:"grid gap-4 md:gap-6",children:i.map(s=>e.jsxs(l,{className:"shadow-sm",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(p,{className:"flex items-center gap-2 text-lg",children:[e.jsx(d,{className:"h-5 w-5 text-yellow-600"}),s.event_name]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${c(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Date Earned"}),e.jsx("p",{children:new Date(s.date_earned).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Type"}),e.jsx("p",{children:s.type})]})]}),s.status==="available"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{size:"sm",onClick:()=>N(s),disabled:r===s.id,className:"gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),r===s.id?"Downloading...":"Download"]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>y(s),className:"gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Preview"]})]}),s.status==="processing"&&e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Certificate is being prepared. Check back later."})})]})]},s.id))}):e.jsx(l,{className:"p-8 text-center",children:e.jsxs(t,{children:[e.jsx(d,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No Certificates Yet"}),e.jsx("p",{className:"text-gray-600",children:"Attend events and complete them to earn certificates!"})]})})})]})]})})]})]})]})}export{se as default};
