import{K as J,r as o,j as e,L as O,S as w}from"./app-BdPpWGLJ.js";import{A as _,a as C}from"./alert-DG357W9O.js";import{B as S}from"./badge-D_bdviFJ.js";import{B as n}from"./button-BuCqSNRC.js";import{C as P,b as k,c as A,a as M}from"./card-BtGsdJ-A.js";import{I}from"./input-CJ5u-Ehu.js";import{S as K,a as X,b as q,c as G,d as U}from"./select-ytTar13N.js";import Q from"./Header-DvEThn6g.js";import B from"./Sidebar-Cpkn8Eoa.js";import{C as W}from"./circle-check-big-C0H7LAni.js";import{C as Y}from"./circle-x-CLy0dsM4.js";import{U as T}from"./user-C9tW9BqQ.js";import{U as Z}from"./users-D1IBQiQF.js";import{M as D}from"./mail-JZShG0Iz.js";import{P as R}from"./phone-B1Jefk97.js";import{M as $}from"./map-pin-D_1HPcGj.js";import{B as z}from"./building-2-ChlueEyF.js";import"./index-CjEOaA6G.js";import"./Combination-CG2veN4F.js";import"./index-9x8D2YpE.js";import"./createLucideIcon-BviXk1dR.js";import"./dropdown-menu-CpJymw2_.js";import"./index-CtBsO7PD.js";import"./log-out-B3SWGeCu.js";import"./house-S9upzyz_.js";import"./calendar-CptHtpE8.js";function Se({residents:i,partners:c,puroks:F,filters:d}){const{flash:r}=J().props,[p,g]=o.useState(!1),[x,j]=o.useState(d.search),[u,N]=o.useState(d.purok_id),[m,f]=o.useState("residents"),h=(s,a)=>{w.get(route("captain.users"),{search:s||void 0,purok_id:a!=="all"?a:void 0},{preserveState:!0,replace:!0})},L=s=>{s.preventDefault(),h(x,u)},V=s=>{N(s),h(x,s)},E=()=>{j(""),N("all"),h("","all")},v=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=s=>{switch(s){case"resident":return"bg-blue-100 text-blue-800";case"partner_agency":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},l=(s,a)=>{const t=a==="residents"?"residents_page":"partners_page";w.get(route("captain.users"),{[t]:s},{preserveState:!0})},y=({data:s,type:a})=>s.last_page<=1?null:e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx(n,{variant:"outline",onClick:()=>l(s.current_page-1,a),disabled:s.current_page===1,children:"Previous"}),e.jsx(n,{variant:"outline",onClick:()=>l(s.current_page+1,a),disabled:s.current_page===s.last_page,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:s.from})," to ",e.jsx("span",{className:"font-medium",children:s.to})," of"," ",e.jsx("span",{className:"font-medium",children:s.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(s.current_page-1,a),disabled:s.current_page===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2",children:"Previous"}),Array.from({length:s.last_page},(t,H)=>H+1).map(t=>e.jsx(n,{variant:t===s.current_page?"default":"outline",size:"sm",onClick:()=>l(t,a),className:"relative inline-flex items-center px-4 py-2",children:t},t)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(s.current_page+1,a),disabled:s.current_page===s.last_page,className:"relative inline-flex items-center rounded-r-md px-2 py-2",children:"Next"})]})})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"User Management - Captain"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(B,{currentPage:"captain.users"})}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>g(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(B,{currentPage:"captain.users"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(Q,{userName:"Captain",onMobileMenuToggle:()=>g(!p)}),e.jsxs("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:[(r==null?void 0:r.success)&&e.jsx("div",{className:"mb-6",children:e.jsxs(_,{className:"border-green-200 bg-green-50",children:[e.jsx(W,{className:"h-4 w-4 text-green-600"}),e.jsx(C,{className:"text-green-800",children:r.success})]})}),(r==null?void 0:r.error)&&e.jsx("div",{className:"mb-6",children:e.jsxs(_,{className:"border-red-200 bg-red-50",children:[e.jsx(Y,{className:"h-4 w-4 text-red-600"}),e.jsx(C,{className:"text-red-800",children:r.error})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"View and manage community members and partner agencies"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>f("residents"),className:`border-b-2 px-1 py-2 text-sm font-medium whitespace-nowrap ${m==="residents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:["Residents (",i.total,")"]}),e.jsxs("button",{onClick:()=>f("partners"),className:`border-b-2 px-1 py-2 text-sm font-medium whitespace-nowrap ${m==="partners"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:["Partner Agencies (",c.total,")"]})]})})}),m==="residents"&&e.jsxs(P,{children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Approved Residents"]})}),e.jsxs(M,{children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("form",{onSubmit:L,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(I,{type:"text",placeholder:"Search by name, email...",value:x,onChange:s=>j(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(K,{value:u,onValueChange:V,children:[e.jsx(X,{className:"w-40",children:e.jsx(q,{placeholder:"Filter by Purok"})}),e.jsxs(G,{children:[e.jsx(U,{value:"all",children:"All Puroks"}),F.map(s=>e.jsx(U,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(n,{type:"submit",variant:"outline",children:"Search"}),(d.search||d.purok_id!=="all")&&e.jsx(n,{type:"button",variant:"outline",onClick:E,children:"Clear"})]})]})}),i.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(Z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No residents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No approved residents to display."})]}):e.jsx("div",{className:"space-y-4",children:i.data.map(s=>e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.name}),e.jsx(S,{className:b(s.role),children:"Resident"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["Joined: ",v(s.created_at)]})})]})]})})},s.id))}),e.jsx(y,{data:i,type:"residents"})]})]}),m==="partners"&&e.jsxs(P,{children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Approved Partner Agencies"]})}),e.jsxs(M,{children:[c.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No partner agencies found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No approved partner agencies to display."})]}):e.jsx("div",{className:"space-y-4",children:c.data.map(s=>e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.agency_name||s.name}),e.jsx(S,{className:b(s.role),children:"Partner Agency"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:s.representative_first_name&&s.representative_last_name?`${s.representative_first_name} ${s.representative_last_name}`:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s.agency_contact_number||s.phone})]}),s.agency_address&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s.agency_address})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["Joined: ",v(s.created_at)]})})]})]})})},s.id))}),e.jsx(y,{data:c,type:"partners"})]})]})]})]})]})]})}export{Se as default};
