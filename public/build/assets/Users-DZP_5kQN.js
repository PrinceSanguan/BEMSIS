import{K as H,r as g,j as e,L as O,S as c}from"./app-A-EI-TiJ.js";import{A as M,a as _}from"./alert-C28cYUEI.js";import{B as x}from"./badge-Bp3hIW9y.js";import{B as r}from"./button-DzTN6Cly.js";import{C as i,a as n,b as N,c as f}from"./card-wwDGxIEG.js";import{I as X}from"./input-DKBE7gYn.js";import{S as I,a as K,b as q,c as G,d as $}from"./select-DFazA8Em.js";import J from"./Header-CvAI_0Wn.js";import U from"./Sidebar-BzHA5r-g.js";import{C as Q}from"./circle-check-big-0biwyaTC.js";import{C as W}from"./circle-x-B9kfd6Oh.js";import{U as t}from"./users-BM1gHv0S.js";import{U as R}from"./user-check-D6GzE1Hq.js";import{U as z}from"./user-x-D8fgM-an.js";import{M as v}from"./mail-BjtlCZOq.js";import{P as b}from"./phone-Vb6n26wj.js";import{M as B}from"./map-pin-BIWncCA2.js";import{C as u}from"./clock-Co-2dJJ3.js";import{E as y}from"./eye-DNRm0qxh.js";import"./index-CjESLvPs.js";import"./Combination-CElFZ3FQ.js";import"./index-Hk6cU-UI.js";import"./createLucideIcon-BZhozGoK.js";import"./dropdown-menu-DGQe-4UJ.js";import"./index-CtBsO7PD.js";import"./user-B1KB47V2.js";import"./log-out-BgC-fe1g.js";import"./chart-column-CtrreKb0.js";import"./calendar-D2zZ6fgA.js";import"./qr-code-3m6wUdtB.js";import"./file-text-DgiOBqij.js";function De({pendingUsers:d,approvedUsers:w,approvedPartners:C,puroks:T,filters:m,className:V}){const{flash:l}=H().props,[S,k]=g.useState(!1),[o,A]=g.useState(m.search),[P,D]=g.useState(m.purok_id),h=(s,a)=>{c.get(route("secretary.users"),{search:s||void 0,purok_id:a!=="all"?a:void 0},{preserveState:!0,replace:!0})},E=s=>{s.preventDefault(),h(o,P)},F=s=>{D(s),h(o,s)},L=()=>{A(""),D("all"),h("","all")},p=s=>({resident:{label:"Resident",color:"bg-blue-100 text-blue-800"},partner_agency:{label:"Partner Agency",color:"bg-green-100 text-green-800"},secretary:{label:"Secretary",color:"bg-purple-100 text-purple-800"},captain:{label:"Captain",color:"bg-red-100 text-red-800"}})[s]||{label:s,color:"bg-gray-100 text-gray-800"},j=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"User Management - Secretary"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(U,{currentPage:"secretary.users"})}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(U,{currentPage:"secretary.users"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(J,{onMobileMenuToggle:()=>k(!S)}),e.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-6 ${V||""}`,children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Review and approve pending user registrations"})]}),(l==null?void 0:l.success)&&e.jsxs(M,{className:"border-green-200 bg-green-50",children:[e.jsx(Q,{className:"h-4 w-4 text-green-600"}),e.jsx(_,{className:"text-green-800",children:l.success})]}),(l==null?void 0:l.error)&&e.jsxs(M,{className:"border-red-200 bg-red-50",children:[e.jsx(W,{className:"h-4 w-4 text-red-600"}),e.jsx(_,{className:"text-red-800",children:l.error})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]}),e.jsx(t,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Residents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.role==="resident").length})]}),e.jsx(R,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Partner Agencies"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.role==="partner_agency").length})]}),e.jsx(z,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(i,{children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),"Pending User Registrations"]})}),e.jsx(n,{children:d.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(t,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No pending users"}),e.jsx("p",{className:"text-gray-600",children:"All user registrations have been reviewed."})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(x,{className:a.color,children:a.label})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm text-gray-600 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Registered: ",j(s.created_at)]})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(r,{onClick:()=>c.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})},s.id)})})})]}),e.jsxs(i,{className:"mt-8",children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),"Approved Users"]})}),e.jsxs(n,{children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(X,{type:"text",placeholder:"Search by name, email...",value:o,onChange:s=>A(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{value:P,onValueChange:F,children:[e.jsx(K,{className:"w-40",children:e.jsx(q,{placeholder:"Filter by Purok"})}),e.jsxs(G,{children:[e.jsx($,{value:"all",children:"All Puroks"}),T.map(s=>e.jsx($,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(r,{type:"submit",variant:"outline",children:"Search"}),(m.search||m.purok_id!=="all")&&e.jsx(r,{type:"button",variant:"outline",onClick:L,children:"Clear"})]})]})}),w.data.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(t,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No approved users"}),e.jsx("p",{className:"text-gray-600",children:"No users have been approved yet."})]}):e.jsx("div",{className:"space-y-4",children:w.data.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(x,{className:`px-2 py-1 text-xs font-medium ${a.color}`,children:a.label}),e.jsx(x,{className:"bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Approved"})]}),e.jsxs("div",{className:"grid gap-2 text-sm text-gray-600 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Approved: ",j(s.updated_at)]})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(r,{onClick:()=>c.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})},s.id)})})]})]}),e.jsxs(i,{className:"mt-8",children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),"Approved Partners"]})}),e.jsx(n,{children:C.data.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(t,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No approved partners"}),e.jsx("p",{className:"text-gray-600",children:"No partner agencies have been approved yet."})]}):e.jsx("div",{className:"space-y-4",children:C.data.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(x,{className:`px-2 py-1 text-xs font-medium ${a.color}`,children:a.label}),e.jsx(x,{className:"bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Approved"})]}),e.jsxs("div",{className:"grid gap-2 text-sm text-gray-600 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Approved: ",j(s.updated_at)]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{onClick:()=>c.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.is_active?e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>c.patch(`/secretary/users/${s.id}/deactivate`),className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(z,{className:"h-4 w-4"}),"Deactivate"]}):e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>c.patch(`/secretary/users/${s.id}/activate`),className:"flex items-center gap-2 text-green-600 hover:text-green-700",children:[e.jsx(R,{className:"h-4 w-4"}),"Activate"]})]})]})},s.id)})})})]})]})})]})]})]})}export{De as default};
