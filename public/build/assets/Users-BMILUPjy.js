import{K as F,r as g,j as e,L,S as m}from"./app-DpTxKQAf.js";import{A as M,a as U}from"./alert-B1caCfZ1.js";import{B as n}from"./badge-BHaFTTI2.js";import{B as d}from"./button-EmHOAWCh.js";import{C as t,a as c,b as N,c as f}from"./card-DrGcUUNM.js";import{I as H}from"./input-6b6wo28k.js";import{S as O,a as X,b as I,c as K,d as _}from"./select-YpwfVHn3.js";import q from"./Header-CPfrUZWL.js";import R from"./Sidebar-CiCbE-lx.js";import{C as G}from"./circle-check-big-D4t3uExM.js";import{C as J}from"./circle-x-dWB1UB7q.js";import{U as r}from"./users-cUYpqWpM.js";import{U as Q}from"./user-check-uXZXfuYT.js";import{U as W}from"./user-x-D3Ii58CF.js";import{M as v}from"./mail-BETHgdgr.js";import{P as b}from"./phone-BPWRGX_K.js";import{M as $}from"./map-pin-Cv-ZHoQ3.js";import{C as u}from"./clock-BJoP2_AG.js";import{E as y}from"./eye-VxsTZ_5d.js";import"./index-BtH7JKO-.js";import"./Combination-DQHq3tOk.js";import"./index-CtX3QR9Y.js";import"./createLucideIcon-uFufCLSQ.js";import"./dropdown-menu-CKSOrcSz.js";import"./index-CtBsO7PD.js";import"./user-wZ1yEFEq.js";import"./log-out-BUIlX1OT.js";import"./chart-column-ca2rcyDB.js";import"./calendar--REYLK8D.js";import"./qr-code-Dwz7AgoG.js";import"./file-text-Bexp6W_O.js";function De({pendingUsers:i,approvedUsers:w,approvedPartners:S,puroks:B,filters:x,className:T}){const{flash:l}=F().props,[C,k]=g.useState(!1),[o,P]=g.useState(x.search),[A,D]=g.useState(x.purok_id),h=(s,a)=>{m.get(route("secretary.users"),{search:s||void 0,purok_id:a!=="all"?a:void 0},{preserveState:!0,replace:!0})},V=s=>{s.preventDefault(),h(o,A)},z=s=>{D(s),h(o,s)},E=()=>{P(""),D("all"),h("","all")},p=s=>({resident:{label:"Resident",color:"bg-blue-100 text-blue-800"},partner_agency:{label:"Partner Agency",color:"bg-green-100 text-green-800"},secretary:{label:"Secretary",color:"bg-purple-100 text-purple-800"},captain:{label:"Captain",color:"bg-red-100 text-red-800"}})[s]||{label:s,color:"bg-gray-100 text-gray-800"},j=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"User Management - Secretary"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(R,{currentPage:"secretary.users"})}),C&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(R,{currentPage:"secretary.users"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(q,{onMobileMenuToggle:()=>k(!C)}),e.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-6 ${T||""}`,children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Review and approve pending user registrations"})]}),(l==null?void 0:l.success)&&e.jsxs(M,{className:"border-green-200 bg-green-50",children:[e.jsx(G,{className:"h-4 w-4 text-green-600"}),e.jsx(U,{className:"text-green-800",children:l.success})]}),(l==null?void 0:l.error)&&e.jsxs(M,{className:"border-red-200 bg-red-50",children:[e.jsx(J,{className:"h-4 w-4 text-red-600"}),e.jsx(U,{className:"text-red-800",children:l.error})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx(t,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),e.jsx(r,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(t,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Residents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.role==="resident").length})]}),e.jsx(Q,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(t,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Partner Agencies"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.role==="partner_agency").length})]}),e.jsx(W,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(t,{children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5"}),"Pending User Registrations"]})}),e.jsx(c,{children:i.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(r,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No pending users"}),e.jsx("p",{className:"text-gray-600",children:"All user registrations have been reviewed."})]}):e.jsx("div",{className:"space-y-4",children:i.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(n,{className:a.color,children:a.label})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm text-gray-600 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Registered: ",j(s.created_at)]})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(d,{onClick:()=>m.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})},s.id)})})})]}),e.jsxs(t,{className:"mt-8",children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5"}),"Approved Users"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("form",{onSubmit:V,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(H,{type:"text",placeholder:"Search by name, email...",value:o,onChange:s=>P(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{value:A,onValueChange:z,children:[e.jsx(X,{className:"w-40",children:e.jsx(I,{placeholder:"Filter by Purok"})}),e.jsxs(K,{children:[e.jsx(_,{value:"all",children:"All Puroks"}),B.map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(d,{type:"submit",variant:"outline",children:"Search"}),(x.search||x.purok_id!=="all")&&e.jsx(d,{type:"button",variant:"outline",onClick:E,children:"Clear"})]})]})}),w.data.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(r,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No approved users"}),e.jsx("p",{className:"text-gray-600",children:"No users have been approved yet."})]}):e.jsx("div",{className:"space-y-4",children:w.data.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(n,{className:`px-2 py-1 text-xs font-medium ${a.color}`,children:a.label}),e.jsx(n,{className:"bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Approved"})]}),e.jsxs("div",{className:"grid gap-2 text-sm text-gray-600 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Approved: ",j(s.updated_at)]})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(d,{onClick:()=>m.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})},s.id)})})]})]}),e.jsxs(t,{className:"mt-8",children:[e.jsx(N,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5"}),"Approved Partners"]})}),e.jsx(c,{children:S.data.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(r,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No approved partners"}),e.jsx("p",{className:"text-gray-600",children:"No partner agencies have been approved yet."})]}):e.jsx("div",{className:"space-y-4",children:S.data.map(s=>{const a=p(s.role);return e.jsx("div",{className:"rounded-lg border border-gray-200 p-6 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx(n,{className:`px-2 py-1 text-xs font-medium ${a.color}`,children:a.label}),e.jsx(n,{className:"bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"Approved"})]}),e.jsxs("div",{className:"grid gap-2 text-sm text-gray-600 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Approved: ",j(s.updated_at)]})]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(d,{onClick:()=>m.get(`/secretary/users/${s.id}/details`),className:"bg-blue-600 text-white hover:bg-blue-700",size:"sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})},s.id)})})})]})]})})]})]})]})}export{De as default};
