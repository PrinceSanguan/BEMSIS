import{K as O,r as x,j as e,L as I,S as i}from"./app-D3T1n4bI.js";import{A as _,a as C}from"./alert-RtdgKugQ.js";import{B as S}from"./badge-r4QWlGEb.js";import{B as a}from"./button-f6i-Hsu5.js";import{C as k,b as P,c as A,a as z}from"./card-XNqk8LyP.js";import{I as K}from"./input-CqJsF-us.js";import{S as X,a as q,b as G,c as Q,d as D}from"./select-DNPJeCqC.js";import W from"./Header-CVhdgmhU.js";import $ from"./Sidebar-CcdIv8QN.js";import{C as Y}from"./circle-check-big-DGrTJ97t.js";import{C as Z}from"./circle-x-Ci2VHZYv.js";import{U as M}from"./user-DrVmvJgf.js";import{U as ee}from"./users-eciyp-rC.js";import{M as U}from"./mail-CNkrmUqY.js";import{P as B}from"./phone-Dn0JUabC.js";import{M as T}from"./map-pin-Dif7QdtW.js";import{E as R}from"./eye-iGYlmJlB.js";import{B as V}from"./building-2-CXBY0-v_.js";import"./index-4zbVwmYN.js";import"./Combination-Cjm0Iuft.js";import"./index-Dw3UcoPi.js";import"./createLucideIcon-BpmfQe8N.js";import"./dropdown-menu-B3k3E-lp.js";import"./index-CtBsO7PD.js";import"./log-out-Bu8ebVwl.js";import"./house-fL4Wfdlk.js";import"./calendar-DbRQwxhL.js";function Pe({residents:c,partners:d,puroks:E,filters:m}){const{flash:r}=O().props,[j,g]=x.useState(!1),[h,v]=x.useState(m.search),[N,u]=x.useState(m.purok_id),[o,f]=x.useState("residents"),p=(s,t)=>{i.get(route("captain.users"),{search:s||void 0,purok_id:t!=="all"?t:void 0},{preserveState:!0,replace:!0})},F=s=>{s.preventDefault(),p(h,N)},L=s=>{u(s),p(h,s)},H=()=>{v(""),u("all"),p("","all")},b=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),y=s=>{switch(s){case"resident":return"bg-blue-100 text-blue-800";case"partner_agency":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},l=(s,t)=>{const n=t==="residents"?"residents_page":"partners_page";i.get(route("captain.users"),{[n]:s},{preserveState:!0})},w=({data:s,type:t})=>s.last_page<=1?null:e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx(a,{variant:"outline",onClick:()=>l(s.current_page-1,t),disabled:s.current_page===1,children:"Previous"}),e.jsx(a,{variant:"outline",onClick:()=>l(s.current_page+1,t),disabled:s.current_page===s.last_page,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:s.from})," to ",e.jsx("span",{className:"font-medium",children:s.to})," of"," ",e.jsx("span",{className:"font-medium",children:s.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>l(s.current_page-1,t),disabled:s.current_page===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2",children:"Previous"}),Array.from({length:s.last_page},(n,J)=>J+1).map(n=>e.jsx(a,{variant:n===s.current_page?"default":"outline",size:"sm",onClick:()=>l(n,t),className:"relative inline-flex items-center px-4 py-2",children:n},n)),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>l(s.current_page+1,t),disabled:s.current_page===s.last_page,className:"relative inline-flex items-center rounded-r-md px-2 py-2",children:"Next"})]})})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"User Management - Captain"}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx($,{currentPage:"captain.users"})}),j&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>g(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx($,{currentPage:"captain.users"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(W,{userName:"Captain",onMobileMenuToggle:()=>g(!j)}),e.jsxs("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:[(r==null?void 0:r.success)&&e.jsx("div",{className:"mb-6",children:e.jsxs(_,{className:"border-green-200 bg-green-50",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsx(C,{className:"text-green-800",children:r.success})]})}),(r==null?void 0:r.error)&&e.jsx("div",{className:"mb-6",children:e.jsxs(_,{className:"border-red-200 bg-red-50",children:[e.jsx(Z,{className:"h-4 w-4 text-red-600"}),e.jsx(C,{className:"text-red-800",children:r.error})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"View and manage community members and partner agencies"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>f("residents"),className:`border-b-2 px-1 py-2 text-sm font-medium whitespace-nowrap ${o==="residents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:["Residents (",c.total,")"]}),e.jsxs("button",{onClick:()=>f("partners"),className:`border-b-2 px-1 py-2 text-sm font-medium whitespace-nowrap ${o==="partners"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:["Partner Agencies (",d.total,")"]})]})})}),o==="residents"&&e.jsxs(k,{children:[e.jsx(P,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Approved Residents"]})}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("form",{onSubmit:F,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{type:"text",placeholder:"Search by name, email...",value:h,onChange:s=>v(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{value:N,onValueChange:L,children:[e.jsx(q,{className:"w-40",children:e.jsx(G,{placeholder:"Filter by Purok"})}),e.jsxs(Q,{children:[e.jsx(D,{value:"all",children:"All Puroks"}),E.map(s=>e.jsx(D,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(a,{type:"submit",variant:"outline",children:"Search"}),(m.search||m.purok_id!=="all")&&e.jsx(a,{type:"button",variant:"outline",onClick:H,children:"Clear"})]})]})}),c.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(ee,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No residents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No approved residents to display."})]}):e.jsx("div",{className:"space-y-4",children:c.data.map(s=>e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.name}),e.jsx(S,{className:y(s.role),children:"Resident"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:s.purok.name})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["Joined: ",b(s.created_at)]})})]})]}),e.jsxs("div",{className:"ml-4 flex flex-shrink-0 gap-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>i.get(route("captain.users.detail",s.id)),children:[e.jsx(R,{className:"mr-1 h-4 w-4"}),"View Details"]}),s.is_active?e.jsx(a,{size:"sm",variant:"outline",onClick:()=>i.patch(`/captain/users/${s.id}/deactivate`),className:"text-red-600 hover:text-red-700",children:"Deactivate"}):e.jsx(a,{size:"sm",variant:"outline",onClick:()=>i.patch(`/captain/users/${s.id}/activate`),className:"text-green-600 hover:text-green-700",children:"Activate"})]})]})},s.id))}),e.jsx(w,{data:c,type:"residents"})]})]}),o==="partners"&&e.jsxs(k,{children:[e.jsx(P,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Approved Partner Agencies"]})}),e.jsxs(z,{children:[d.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(V,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No partner agencies found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No approved partner agencies to display."})]}):e.jsx("div",{className:"space-y-4",children:d.data.map(s=>e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.agency_name||s.name}),e.jsx(S,{className:y(s.role),children:"Partner Agency"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 text-sm text-gray-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:s.representative_first_name&&s.representative_last_name?`${s.representative_first_name} ${s.representative_last_name}`:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:s.agency_contact_number||s.phone})]}),s.agency_address&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:s.agency_address})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["Joined: ",b(s.created_at)]})})]})]}),e.jsxs("div",{className:"ml-4 flex flex-shrink-0 gap-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>i.get(route("captain.users.detail",s.id)),children:[e.jsx(R,{className:"mr-1 h-4 w-4"}),"View Details"]}),s.is_active?e.jsx(a,{size:"sm",variant:"outline",onClick:()=>i.patch(`/captain/users/${s.id}/deactivate`),className:"text-red-600 hover:text-red-700",children:"Deactivate"}):e.jsx(a,{size:"sm",variant:"outline",onClick:()=>i.patch(`/captain/users/${s.id}/activate`),className:"text-green-600 hover:text-green-700",children:"Activate"})]})]})},s.id))}),e.jsx(w,{data:d,type:"partners"})]})]})]})]})]})]})}export{Pe as default};
