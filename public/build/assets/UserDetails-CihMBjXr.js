import{K as R,r as h,j as e,L as z,S as p}from"./app-BFlZVLfL.js";import{A as C,a as D}from"./alert-D_H0EuGj.js";import{B as j}from"./badge-B70FZcBD.js";import{B as c}from"./button-Boy8FKKL.js";import{C as l,b as n,a as r,c as d}from"./card-Baaz4UcA.js";import V from"./Header-Ba2_iGmy.js";import S from"./Sidebar--zxoXIMN.js";import{C as g}from"./circle-check-big-D0_3oNxV.js";import{C as k}from"./circle-x-dB6buBgr.js";import{A as T}from"./arrow-left-CUqAWRp5.js";import{C as N}from"./calendar-DLubJaV-.js";import{U as F}from"./user-x-DqUitm9l.js";import{U as A}from"./user-B5rPnYOR.js";import{P as f}from"./phone-WE8jQY10.js";import{M as $}from"./mail-CmT2ZGeM.js";import{M as H}from"./map-pin-C6G6Q1Y8.js";import{I}from"./id-card-BpaLEeXu.js";import{E as v}from"./eye-DW0qnS2w.js";import{D as y}from"./download-CHWsy8wN.js";import{B as X}from"./building-2-BeC8KPWj.js";import"./dropdown-menu-CtBiUUKH.js";import"./createLucideIcon-Dlxr-Bzl.js";import"./Combination-D54iwMCs.js";import"./index-BKyhXRh8.js";import"./index-CtBsO7PD.js";import"./log-out-DFpwgHaE.js";import"./house-DJ1pNNcn.js";import"./users-8-TyVH4X.js";function be({user:s,className:J}){const{flash:t}=R().props,[b,u]=h.useState(!1),[m,M]=h.useState(s);h.useEffect(()=>{const a=setInterval(async()=>{try{const i=await fetch(`/api/users/${s.id}/status`);if(i.ok){const w=await i.json();M(O=>({...O,is_online:w.is_online,last_seen_at:w.last_seen_at}))}}catch(i){console.error("Failed to fetch user status:",i)}},3e4);return()=>clearInterval(a)},[s.id]);const o=()=>{if(m.is_online)return{label:"Online",color:"bg-green-100 text-green-800",icon:"ðŸŸ¢"};{const a=m.last_seen_at?new Date(m.last_seen_at):null;return a?Math.floor((Date.now()-a.getTime())/6e4)<5?{label:"Recently Active",color:"bg-yellow-100 text-yellow-800",icon:"ðŸŸ¡"}:{label:"Offline",color:"bg-gray-100 text-gray-800",icon:"âš«"}:{label:"Offline",color:"bg-gray-100 text-gray-800",icon:"âš«"}}},U=a=>({resident:{label:"Resident",color:"bg-blue-100 text-blue-800"},partner_agency:{label:"Partner Agency",color:"bg-green-100 text-green-800"},secretary:{label:"Secretary",color:"bg-purple-100 text-purple-800"},captain:{label:"Captain",color:"bg-red-100 text-red-800"}})[a]||{label:a,color:"bg-gray-100 text-gray-800"},B=a=>({pending:{label:"Pending Review",color:"bg-yellow-100 text-yellow-800",icon:N},approved:{label:"Approved",color:"bg-green-100 text-green-800",icon:g},declined:{label:"Declined",color:"bg-red-100 text-red-800",icon:k}})[a]||{label:a,color:"bg-gray-100 text-gray-800",icon:N},P=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),E=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),_=U(s.role),x=B(s.status),L=x.icon;return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:`User Details - ${s.name}`}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(S,{currentPage:"captain.users"})}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>u(!1)}),e.jsx("div",{className:"absolute top-0 left-0 h-full",children:e.jsx(S,{currentPage:"captain.users"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(V,{userName:"Captain",onMobileMenuToggle:()=>u(!b)}),e.jsxs("main",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:[(t==null?void 0:t.success)&&e.jsx("div",{className:"mb-6",children:e.jsxs(C,{className:"border-green-200 bg-green-50",children:[e.jsx(g,{className:"h-4 w-4 text-green-600"}),e.jsx(D,{className:"text-green-800",children:t.success})]})}),(t==null?void 0:t.error)&&e.jsx("div",{className:"mb-6",children:e.jsxs(C,{className:"border-red-200 bg-red-50",children:[e.jsx(k,{className:"h-4 w-4 text-red-600"}),e.jsx(D,{className:"text-red-800",children:t.error})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs(c,{variant:"outline",onClick:()=>p.get(route("captain.users")),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Back to Users"]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[e.jsx(l,{children:e.jsx(n,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsx(j,{className:`px-3 py-1 ${_.color}`,children:_.label}),e.jsxs(j,{className:`px-3 py-1 ${x.color}`,children:[e.jsx(L,{className:"mr-1 h-3 w-3"}),x.label]}),e.jsxs(j,{className:`px-3 py-1 text-sm font-medium ${o().color}`,children:[e.jsx("span",{className:"mr-1",children:o().icon}),o().label]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsxs("span",{children:["Joined on ",P(s.created_at)]})]})]})})})}),s.status==="approved"&&e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Status"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["This account is currently ",s.is_active?"active":"deactivated"]})]}),e.jsx("div",{className:"flex gap-3",children:s.is_active?e.jsxs(c,{variant:"outline",onClick:()=>p.patch(`/captain/users/${s.id}/deactivate`),className:"border-red-300 text-red-600 hover:border-red-400 hover:text-red-700",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Deactivate Account"]}):e.jsxs(c,{variant:"outline",onClick:()=>p.patch(`/captain/users/${s.id}/activate`),className:"border-green-300 text-green-600 hover:border-green-400 hover:text-green-700",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Activate Account"]})})]})})}),s.role==="resident"?e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Full Name:"}),e.jsx("p",{className:"mt-1",children:`${s.first_name||""} ${s.middle_name||""} ${s.last_name||""} ${s.extension?s.extension:""}`.trim()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Date of Birth:"}),e.jsx("p",{className:"mt-1",children:s.date_of_birth?E(s.date_of_birth):"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Age:"}),e.jsxs("p",{className:"mt-1",children:[s.age||"Not provided"," years old"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Sex:"}),e.jsx("p",{className:"mt-1",children:s.sex||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Civil Status:"}),e.jsx("p",{className:"mt-1",children:s.civil_status||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Place of Birth:"}),e.jsx("p",{className:"mt-1",children:s.place_of_birth||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Citizenship:"}),e.jsx("p",{className:"mt-1",children:s.citizenship||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Occupation:"}),e.jsx("p",{className:"mt-1",children:s.occupation||"Not provided"})]}),s.special_notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Special Notes:"}),e.jsx("p",{className:"mt-1",children:s.special_notes})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Contact & Location"]})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),e.jsx("p",{className:"mt-1",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Contact Number:"}),e.jsx("p",{className:"mt-1",children:s.contact_number||s.phone})]})]}),s.purok&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Purok:"}),e.jsx("p",{className:"mt-1",children:s.purok.name})]})]})]})})]}),s.valid_id_path&&e.jsxs(l,{className:"lg:col-span-2",children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Valid ID Document"]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Valid ID uploaded"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${s.valid_id_path}`,"_blank"),children:[e.jsx(y,{className:"mr-1 h-4 w-4"}),"View Document"]})]})})]})]}):e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Agency Information"]})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Agency Name:"}),e.jsx("p",{className:"mt-1",children:s.agency_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Agency Address:"}),e.jsx("p",{className:"mt-1",children:s.agency_address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Agency Contact:"}),e.jsx("p",{className:"mt-1",children:s.agency_contact_number||"Not provided"})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Representative Information"]})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Representative Name:"}),e.jsx("p",{className:"mt-1",children:s.representative_first_name&&s.representative_last_name?`${s.representative_first_name} ${s.representative_last_name}`:"Not provided"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),e.jsx("p",{className:"mt-1",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Phone:"}),e.jsx("p",{className:"mt-1",children:s.phone})]})]})]})})]}),e.jsxs(l,{className:"lg:col-span-2",children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Uploaded Documents"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[s.agency_valid_id_path&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Valid ID Document"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${s.agency_valid_id_path}`,"_blank"),children:[e.jsx(y,{className:"mr-1 h-4 w-4"}),"View"]})]}),s.agency_endorsement_path&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Endorsement Letter"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${s.agency_endorsement_path}`,"_blank"),children:[e.jsx(y,{className:"mr-1 h-4 w-4"}),"View"]})]}),!s.agency_valid_id_path&&!s.agency_endorsement_path&&e.jsx("p",{className:"text-sm text-gray-500",children:"No documents uploaded"})]})})]})]})]})]})]})]})]})}export{be as default};
